<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>






  
  
  
  
  
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">





  
  
  
  
  
  <title>c:\allegro\html\oai.htm</title>
</head>


<body>






<table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">






  <tbody>






    <tr>






      <td style="vertical-align: top;" width="25%"><a href="http://www.allegro-c.de/"><img style="border: 0px solid ; width: 90px; height: 112px;" alt="" title="allegro homepage" src="a10.gif"></a> </td>






      <td style="vertical-align: top; text-align: center;" width="50%"><br>






      <big style="color: rgb(255, 0, 0);"><big><span style="font-weight: bold; font-family: verdana;"><span style="font-style: italic;"><big>allegro</big></span><big>
und OAI</big><br>






      </span></big></big><br>






      
      
      
      
      
      <p class="MsoNormal" style="text-align: center;" align="center"><span style="font-size: 11pt; font-family: Verdana; color: black;">Offenes
Anbieten von Informationsprodukten</span></p>






      </td>






      <td style="text-align: right;" width="25%"><small><span style="font-family: verdana;"></span></small><a href="http://www.openarchives.org/"><img title="OAI Homepage" style="border: 0px solid ; width: 100px; height: 70px;" alt="OAI Icon" src="http://www.openarchives.org/images/OA100.gif"></a><br>



      <small><span style="font-family: Verdana;">OAI-Homepage </span><span style="font-family: verdana;"></span></small><a href="http://www.w3.org/XML/" style="font-weight: bold;"><span style="font-family: monospace;"></span></a></td>






    </tr>






  
  
  
  
  
  </tbody>
</table>






<span style="font-family: verdana;"></span>
<p class="MsoNormal" style="text-align: center;" align="center"><span style="font-family: &quot;MS Sans Serif&quot;; color: black;"><o:p>&nbsp;</o:p></span></p>






<br>






<table style="width: 80%; text-align: left; margin-left: auto; margin-right: auto;" border="0" cellpadding="2" cellspacing="2">






  <tbody>






    <tr>






      <td>
      
      
      
      
      
      <p class="MsoNormal" style="text-align: right;" align="right"><span style="font-size: 10pt; font-family: Verdana; color: black;">&nbsp;</span><b>
      <span style="font-size: 10pt; font-family: Verdana; color: rgb(255, 102, 0);">Mit
a99 ausprobieren : <span style="color: rgb(0, 0, 0);">h oai</span> &nbsp;eingeben</span></b><span style="font-size: 10pt; font-family: Verdana; color: black;">
      </span><span style="font-size: 14pt; font-family: Verdana; color: black;"><o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><b><span style="font-size: 10pt; font-family: Verdana; color: black;">Worum
geht es?</span></b><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;">Die
Open Archives
Initiative (OAI) hat vor Jahr und Tag ein Protokoll proklamiert, mit
dem es ein
Leichtes sein soll, zu ernten, wo andere ges&auml;t haben. Das
Erfreuliche an den digitalen
Erzeugnissen ist ja, da&szlig; man sie verlustfrei duplizieren
kann: wie oft und wie
viel man auch erntet, nachher ist stets noch genausoviel da wie vorher.
Wenn
also der Datenwirt sein Geld mit anderen Dingen verdient, kann er
sich's bequem
und seinen Grund und Boden f&uuml;r jedermann zug&auml;nglich
machen, d.h. alles zum
Abernten freigeben. Wie nun aber das Ernten von Feld- und
Gartenfr&uuml;chten nicht
auf x-beliebige Art, sondern mit Vor- und Umsicht nach erprobten
Verfahren zu
erfolgen hat, so sind auch beim digitalen Abernten von
Datenfr&uuml;chten strikte
Regeln notwendig, bei deren Nichteinhaltung man leer ausgeht. Die Summe
solcher
Regeln wird "Protokoll" genannt. Das OAI-Protokoll soll demnach als
einheitliches Regularium das ressourcenschonende Beziehen von Daten
&uuml;ber
Unternehmensgrenzen hinweg erm&ouml;glichen.
Folgenderma&szlig;en mu&szlig; man sich das Ganze
vorstellen: <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;">Ein
Datenerzeuger
(engl. "Data Provider"), nennen wir ihn Mecke, kann digitale
Handzettel verbreiten, auf denen steht: <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p>&nbsp;</o:p><br>






      </span></p>



      
      
      
      <div style="text-align: center;"><span style="font-size: 10pt; font-family: Verdana; color: black;"><span style=""></span></span><big style="font-family: Comic Sans MS;"><b><span style="">Selber
ernten bei OAI-Datenwirt
Mecke!</span></b></big></div>



      
      
      
      <p style="text-align: center;" class="MsoNormal"><big style="font-family: Comic Sans MS;"><span style=""><span style="font-style: italic;">Adresse:</span></span></big><span style="font-size: 10pt; font-family: Verdana; color: black;">
&nbsp;</span><b><span style="font-size: 10pt; font-family: Verdana; color: blue;">http://www.mecke.de/oai.php?...</span></b><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p>&nbsp;</o:p><br>






Die
URL, die er hier
angibt, ist die sog. <b>Basis-URL</b> seiner
Produktionsst&auml;tte. An diese Basis
hat man wohlformulierte W&uuml;nsche anzuh&auml;ngen, um
bestimmte Ausk&uuml;nfte oder
Produkte abzurufen. Z.B. sieht das dann so aus: <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><span style="">&nbsp;&nbsp; </span></span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;; color: black;">http://www.mecke.de/oai.php?verb=ListSets</span><span style="font-size: 10pt; font-family: Verdana; color: black;">
      <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p>Das
Wort
"verb" bedeutet hierbei soviel wie "Wunsch". Der hier
formulierte Wunsch, </span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;; color: black;">verb=ListSets</span><span style="font-size: 10pt; font-family: Verdana; color: black;">,
erbittet die
Zusendung einer Liste der bei Mecke erh&auml;ltlichen Produkte.
Anders als bei
Agrarerzeugnissen ist jedoch auf diesem Markt auch das Aussehen der
Antworten
auf solche Anfragen ganz penibel geregelt! Stets mu&szlig; die
Auskunft, die gegeben
wird, in genauestens vorgeschriebener Weise mit XML verbr&auml;mt
sein. Im genannten
Beispiel hat die Antwort im Wesentlichen aus XML-Textabschnitten dieser
Gestalt
zu bestehen:</span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-family: monospace;">&lt;set&gt;</span><br style="font-family: monospace;">





      <span style="font-family: monospace;">&nbsp; &lt;setSpec&gt;<span style="font-weight: bold; color: rgb(51, 102, 255);">obst:pflaumen</span>&lt;/setSpec&gt;</span><br style="font-family: monospace;">





      <span style="font-family: monospace;">&nbsp; &lt;setName&gt;<span style="font-weight: bold; color: rgb(51, 102, 255);">Pflaumen</span>&lt;/setName&gt;</span><br style="font-family: monospace;">





      <span style="font-family: monospace;">&lt;/set&gt;</span><br style="font-family: monospace;">





      <span style="font-family: monospace;">&lt;set&gt;</span><br style="font-family: monospace;">





      <span style="font-family: monospace;">&nbsp; &lt;setSpec&gt;<span style="font-weight: bold; color: rgb(51, 102, 255);">gemuese:mohrrueben</span>&lt;/setSpec&gt;</span><br style="font-family: monospace;">





      <span style="font-family: monospace;">&nbsp; &lt;setName&gt;<span style="font-weight: bold; color: rgb(51, 102, 255);">M&ouml;hren</span>&lt;/setName&gt;</span><br style="font-family: monospace;">





      <span style="font-family: monospace;">&lt;/set&gt;</span><br>





      <span style="font-size: 10pt; font-family: Verdana; color: black;"><br>





Das sind nur die obligatorischen Dinge,
es kann noch allerhand andere Information hinzutreten. Mecke kann in
dieser
Weise sein Angebot in Gruppen strukturieren (</span><span style="font-size: 10pt; color: black;"><span style="font-family: monospace;">obst</span></span><span style="font-size: 10pt; font-family: Verdana; color: black;">, </span><span style="font-size: 10pt; color: black;"><span style="font-family: monospace;">gemuese</span></span><span style="font-size: 10pt; font-family: Verdana; color: black;">) und
seine konkreten
Produkte in diese Gruppen einordnen (</span><span style="font-size: 10pt; color: black;"><span style="font-family: monospace;">pflaumen</span></span><span style="font-size: 10pt; font-family: Verdana; color: black;">, </span><span style="font-size: 10pt; color: black;"><span style="font-family: monospace;">mohrrueben</span></span><span style="font-size: 10pt; font-family: Verdana; color: black;">). Sein
Nachbar, Datenwirt
Fricke, kann es ganz anders machen, nicht aber die Bezeichnungen
(XML-"tags") &auml;ndern, die zwischen &lt;...&gt; stehen!
Seine Basis-URL
wird nat&uuml;rlich auch anders aussehen, z.B.: <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      </span></span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;; color: black;">http://www.datenfricke.eu/datashop.pl?</span><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><small><span style="font-family: Verdana;">und
seine Angebotsgruppen (Sets) k&ouml;nnen ganz andere sein, z.B. formal
gegliedert (Aufs&auml;tze, B&uuml;cher, ...) oder inhaltlich
(Mathematik, Philosophie, ...).</span></small><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p></span></p>



      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p>Im
n&auml;chsten Schritt
kann der Kunde seine Bestellung aufgeben. Will er Meckes
M&ouml;hren beziehen, mu&szlig;
seine Bestellung so aussehen: <o:p></o:p></span></p>






      

      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p>&nbsp;</o:p><span style=""></span></span><span style="font-size: 10pt; color: black;"><span style=""><span style="font-family: monospace;">&nbsp; </span></span><span style="font-family: monospace;">http://www.mecke.de/oai.php?verb=ListRecords&amp;set=</span><b style="font-family: monospace;">gemuese:mohrrueben</b><span style="font-family: monospace;">&amp;from=</span><b style="font-family: monospace;">2008-12-01</b><span style="font-family: monospace;">&amp;metadataFormat=</span><b style="font-family: monospace;">oai_dc</b></span><span style="font-size: 10pt; font-family: Verdana; color: black;">
      <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p>Hiermit
geschieht das
eigentliche Ernten, was also in Wirklichkeit ein Abrufen ist und kein
physisches Hingehen mit Schmutzigmachen der H&auml;nde - das
Kr&uuml;mmen des Fingers f&uuml;r
die linke Maustaste gen&uuml;gt! Der Kunde ruft bei Mecke das
Produkt M&ouml;hren ab, und
zwar alle ab 2008-12-01 erzeugten Exemplare. Gew&uuml;nscht wird
hier zudem der
Verpackungstyp <b>oai_dc</b>. <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;">Mecke
und Fricke
k&ouml;nnen unterschiedliche Verpackungen anbieten, jeder
mu&szlig; aber auf Verlangen
auch den Standard-Verpackungstyp oai_dc liefern k&ouml;nnen. Stets
handelt es sich&nbsp;beim Verpackungsmaterial um XML, worauf sich die Datenwirtschaft
international eingeschworen hat. Um damit besser umgehen zu
k&ouml;nnen, wurden in
der Skriptsprache FLEX ein paar &nbsp;</span><b><span style="font-size: 10pt; font-family: Verdana; color: blue;">XML-relevante
Funktionen</span></b><span style="font-size: 10pt; font-family: Verdana; color: black;">&nbsp;
verbessert (s. Vb.212 und Vb.213). <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p>Das
ist schon der
Kern des OAI-Regulariums! Was sonst noch geregelt ist, steht in <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp;</span><a href="http://www.openarchives.org/OAI/openarchivesprotocol.html"><b><span style="font-size: 10pt; font-family: Verdana; color: blue;">http://www.openarchives.org/OAI/openarchivesprotocol.html</span></b></a><span style="font-size: 10pt; font-family: Verdana; color: black;">&nbsp;
      <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p>&nbsp;</o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><b><span style="font-size: 10pt; font-family: Verdana; color: black;">Teillieferungen!</span></b><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;">Eine
wichtige Frage
d&uuml;rfen wir nicht vergessen! Und zwar: Was ist, wenn die Menge
zu gro&szlig; ist f&uuml;r
eine Ladung? Denn die Kapazit&auml;t eines Transportvehikels ist
immer begrenzt,
eine Auslieferung mu&szlig; daher in mehreren Teilen erfolgen
k&ouml;nnen. Folgende
Methode hat man sich daf&uuml;r ausgedacht: <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;">Bei
gro&szlig;en
Ertragsmengen kann der Erzeuger, hier also Mecke, bei einer von ihm
gesetzten
Grenze erst mal Schlu&szlig; machen. Dann mu&szlig; er im
Lieferschein ein individuelles
Abruf-Kennwort angeben, den sog. "resumption token", kurz RT. Der
Datenbezieher erkennt an der Anwesenheit dieses Kennworts,
da&szlig; die Lieferung
unvollst&auml;ndig ist. Mit dem RT kann er den Rest - oder die
n&auml;chste Teillieferung
- abrufen. Ist es wieder nur eine Teillieferung, wird sie
wiederum einen RT -
einen anderen nat&uuml;rlich - enthalten. Ein RT kann mehrfach
verwendet werden, um
exakt dieselbe Teillieferung etwa nach einem Fehlversuch nochmals
abzurufen
(ein sehr gro&szlig;er Unterschied zu Agrarprodukten!). Der
Erzeuger kann die RTs
nach einer von ihm selbst zu setzenden Frist l&ouml;schen, d.h. der
Endanwender kann
nicht davon ausgehen, nach Jahren noch eine bestimmte Teillieferung
erneut
abrufen zu k&ouml;nnen - auch M&ouml;hren sind nicht unbegrenzt
haltbar... <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p>&nbsp;</o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><b><span style="font-size: 10pt; font-family: Verdana; color: black;">Zur
allegro-Realisierung</span></b><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;">Eine
Liste der
Basisadressen, ca. 490 an der Zahl, wird zur Auswahl
aufgebl&auml;ttert, wenn man im
OAI-Men&uuml; die Funktion "OAI-Server" w&auml;hlt. <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;">Das
Original der
Liste liegt bei der &nbsp;</span><a href="http://openarchives.org/"><b><span style="font-size: 10pt; font-family: Verdana; color: blue;">Openarchives.org</span></b></a><span style="font-size: 10pt; font-family: Verdana; color: black;">&nbsp;.
      <o:p></o:p></span></p>






      
      


      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p>&nbsp;</o:p>Als
allegro-Anwender
kann man ab V29.0 sowohl per OAI ernten (und damit "Service Provider" werden) als auch selber als
OAI-Erzeuger ("Data Provider") an den
Markt gehen: <o:p></o:p></span></p>






      
      
      
      
      
      <p class="MsoNormal" style=""><span style="font-size: 10pt; font-family: Verdana; color: black;">1.
F&uuml;r das Erkunden
und Ernten von OAI-Produkten gibt es ein eigenes Men&uuml; mit
eigener Hilfe (&nbsp;</span><b><span style="font-size: 10pt; font-family: Verdana; color: blue;">h
oai</span></b><span style="font-size: 10pt; font-family: Verdana; color: black;">&nbsp;)
      <o:p></o:p></span></p>






      <span style="font-size: 10pt; font-family: Verdana; color: black;"><o:p></o:p>2.
Das eigene Angebot
wird mittels <b><i>avanti</i></b> ins Netz
gestellt. Daf&uuml;r sind einige
PHP-Skripte entwickelt worden, die in PHPAC ab V29 enthalten&nbsp;</span><span style="font-size: 10pt; font-family: Verdana; color: black;">sind.
(Verf&uuml;gbar
ab Ende Januar 2009).<br>
      <br>
      <span style="font-weight: bold;">Hinweis</span><br>
Seit 2006 gibt es eine Perl-Implementierung des OAI-Protokolls von Thomas Berger:<br>
      <a href="http://www.gymel.com/populo/oai-pmh.html">http://www.gymel.com/populo/oai-pmh.html</a><br>
Diese beruht auf dem "populo"-Paket des n&auml;mlichen Autors, das bei
Anbietern von allegro-Web-Katalogen sehr verbreitet eingesetzt wird.
Anwender von PHPAC werden m&ouml;glicherweise nicht geneigt sein, neben
PHP auch noch Perl einzusetzen, daher wurde entschieden, eine eigene
Implementierung in PHP auszuarbeiten.<br>
      <br>
      </span> </td>






    </tr>






  
  
  
  
  
  </tbody>
</table>






<br>


<table style="background-color: rgb(255, 255, 204); width: 80%; text-align: left; margin-left: auto; margin-right: auto;" border="0" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <td>
      
      
      <div style="text-align: center;"><span style="font-family: Verdana; font-weight: bold;"><br>


Realisierung</span></div>


      <br style="font-family: Verdana;">


      <span style="font-family: Verdana;">Tip: </span><br style="font-family: Verdana;">


      <span style="font-family: Verdana;">Wer Service Provider werden will, kann in a99 das Men&uuml;&nbsp; <span style="font-weight: bold;">h oai</span> nutzen,</span><br style="font-family: Verdana;">


      <span style="font-family: Verdana;">um Repositorien zu erkunden und Metadaten abzuernten.</span><br style="font-family: Verdana;">


      <br style="font-family: Verdana;">


      <span style="font-family: monospace;">Skripte f&uuml;r OAI Data Provider</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">=============================</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Die Skripte m&uuml;ssen auf das PHPAC-Verzeichnis zur Datenbank, wo schon die</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">anderen PHP-Skripte liegen.</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">F&uuml;r jede Datenbank braucht man also je eine Kopie der Dateien.</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">Erzeugt wird in jedem Fall XML. Wenn man den output im Browserfenster sehen</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">will (sinnvoll zu Testzwecken), dann am besten den IE nehmen, weil er XML</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">brauchbar anzeigt.</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace; font-weight: bold;">oai.php</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; Das Skript fuer die Basis-URL. Darin keine Anpassungen n&ouml;tig.</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; Braucht:&nbsp; av_mini.php : Grundwerte der eigenen Datenbank (PHPAC)</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oai_ini.php : OAI-Angaben zur eigenen Datenbank</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; oai.php mu&szlig; mit einem der 6 Verbs und den zugeh&ouml;rigen Argumenten aufgerufen werden.</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; F&uuml;r jedes Verb gibt es darin eine PHP-Funktion, bis auf oai_id() wird</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; darin jeweils eine JOB-Datei gestartet:</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; Identify :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oai_id()</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; ListSets
:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
oai_ls()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oai_ls.job</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; ListMetadataFormats : oai_lm()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oai_lm.job</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; ListIdentifiers :&nbsp;&nbsp;&nbsp;&nbsp; oai_lr("i")&nbsp;&nbsp;&nbsp; oai_lr.job</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; ListRecords :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oai_lr("r")&nbsp;&nbsp;&nbsp; oai_lr.job</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; GetRecord
:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
oai_gr()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oai_gr.job</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace; font-weight: bold;">oai_ini.php</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; OAI-Angaben zur eigenen Datenbank</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; In diese mu&szlig; der Data Provider f&uuml;r seine Datenbank die n&ouml;tigen</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; Angaben eintragen. Interne Kommentare erkl&auml;ren alles.</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">-----------------------------------------------------------------------</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">Bei der Datenbank (also auf dem DbDIr) m&uuml;ssen diese Dateien liegen:</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace; font-weight: bold;">oaidc.apr</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; Export im Format oai_dc</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace; font-weight: bold;">oailist.apr</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; Export der Datensatz-Idnummern f&uuml;r die Funktion ListIdentifiers</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">Beide sind intern kommentiert und m&uuml;ssen bei anderen Formaten als</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">$A.CFG geeignet umgeschrieben werden.</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">Test: Mit a99 und dem Men&uuml;&nbsp; oai.rtf&nbsp;</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Vorher setzen:&nbsp; $Serv LOCAL</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
$Burl http://localhost/&lt;path&gt;/oai.php</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dann&nbsp; <span style="font-weight: bold;">h oai</span></span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">Zum Thema "Resumption Token"&nbsp; (RT)</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">----------------------------------</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">Was ist ein RT?</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Bei gro&szlig;en Ergebnismengen kann der OAI-Service bei einer vom Admin</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">zu setzenden Grenze erst mal Schlu&szlig; machen. Dann mu&szlig; er im gelieferten</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Datenpaket ein individuelles Kennwort mitliefern, den sog. RT</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Der Endanwender merkt an der Anwesenheit dieses Kennworts, da&szlig; die</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Lieferung unvollst&auml;ndig ist. Mit dem Kennwort kann er den Rest - oder</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">die n&auml;chste Teillieferung - abrufen. Ist es eine Teillieferung, mu&szlig;</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">sie wiederum einen RT - einen anderen nat&uuml;rlich - enthalten.</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Ein RT kann mehrfach verwendet werden, um dieselbe Teillieferung</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">etwa nach einem Fehlversuch nochmals abrufen zu k&ouml;nnen.</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Der Admin kann die RTs nach einer von ihm selbst zu setzenden Frist</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">l&ouml;schen, d.h. der Endanwender kann nicht davon ausgehen, nach Jahren</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">noch eine bestimmte Teillieferung erneut abrufen zu k&ouml;nnen...</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">Realisierung</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">F&uuml;r die RTs zu einer Datenbank wird an das DbDir ein Unterverzeichnis</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">"rt" angeh&auml;ngt. "avanti" braucht dort Schreibzugriff.</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Ein RT ist dann der Name einer Datei, die auf DbDir/rt liegt.</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Der Dateiname ergibt sich aus dem momentanen Datum+Uhrzeit</span><span style="font-family: monospace;">, und zwar <br>

allein aus den Ziffern, z.B. 20090201135622. Das d&uuml;rfte als Dateiname<br>

sowohl eindeutig wie auch einfach sein. Die Namensstruktur erm&ouml;glicht <br>

auch ein schnelles Sichten und vor allem L&ouml;schen alter Dateien.<br style="font-family: monospace;">

      </span>
      <span style="font-family: monospace;">Was enth&auml;lt eine RT-Datei? Es handelt sich dabei um eine Liste der</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">internen Satznummern aller S&auml;tze, die noch nicht ausgeliefert wurden.</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Hatte also die erste Erg.Menge 10000 S&auml;tze und hat der Admin </span><br style="font-family: monospace;">


      <span style="font-family: monospace;">entschieden, da&szlig; jeweils mit 500 S&auml;tzen erstmal Schlu&szlig; ist, dann</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">enth&auml;lt die erste solche Datei die restlichen 9500 Nummern, die</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">zweite nur noch 9000 Nummern usw.</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Die erste Zeile einer RT-Datei enth&auml;lt folgende Angaben:</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">anfang-ende (ErstellDatum) : Suchbefehl</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">&nbsp; z.B. 501-10000 (2009-01-31) : 2008-01-01 bis 2008-12-31</span><br style="font-family: monospace;">


      <br style="font-family: monospace;">


      <span style="font-family: monospace;">ACHTUNG</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Ein Neuaufbau der Datenbank macht die RT-Dateien ung&uuml;ltig! WENN der</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">Admin einen Neuaufbau veranstaltet, mu&szlig; er die zu dem Zeitpunkt vor-</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">liegenden RT-Dateien alle l&ouml;schen und eine "Sorry"-Meldung senden,</span><br style="font-family: monospace;">


      <span style="font-family: monospace;">wenn jemand noch eine davon abrufen will.</span><br style="font-family: Verdana;">


      <br style="font-family: Verdana;">


      <br style="font-family: Verdana;">


      <br>


      <br>


      <br>


      <br>


      <br>


      <br>


      <br>


      </td>


    </tr>


  
  
  </tbody>
</table>


<br>


<br>






<hr style="width: 100%; height: 2px;">
<p class="MsoNormal" style="text-align: right;"><small><span style="font-family: Verdana;">2009-01-29</span></small></p>






</body>
</html>
