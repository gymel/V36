{\rtf1\fbidis\ansi\ansicpg1253\deff0\deflang1031{\fonttbl{\f0\fscript\fprq2 Comic Sans MS;}{\f1\fscript\fprq2\fcharset0 Comic Sans MS;}{\f2\froman\fprq2 Times New Roman;}{\f3\froman\fprq2 Garamond;}{\f4\froman\fprq2\fcharset0 Times New Roman;}{\f5\fmodern\fprq1\fcharset0 Courier New;}{\f6\fmodern\fprq1 Courier New;}{\f7\fnil\fprq2\fcharset2 Wingdings;}{\f8\fmodern\fprq1\fcharset161{\*\fname Courier New;}Courier New Greek;}{\f9\froman\fprq2\fcharset0 Garamond;}}
{\colortbl ;\red255\green0\blue0;\red0\green0\blue255;}
\viewkind4\uc1\pard\ltrpar\qc\cf1\b\i\f0\fs28 allegro S\i0 ystemhandbuch V\f1 32\f0  
\par \cf0\f2\fs48 
\par \pard\ltrpar\fi-658\li658\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\lang1033\f3 8\tab Sortieren  \b0 
\par \pard\ltrpar\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\lang1031\f2\fs20 
\par \f4 ASORT.EXE ist ein DOS-Programm, d.h. es wird fast immer in Batchdateien eingesetzt, die automatisch gestartet werden. Als Beispiel kann man sich etwa \f5 a99-list.bat\f4  ansehen oder \f5 ct99.bat\f4 , die aus dem Exportmen\'fc heraus gestartet werden\f2 . \f4  
\par \pard\ltrpar\qr\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\f6 `\cf2\ul\b h exprt\cf0\ulnone\b0 `\f2  
\par \pard\ltrpar\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274 
\par \f4 Achtung: Ab V27.2 ist \f5 asort.exe\f4  ein Windows-Konsolprogramm. Es ist frei von einigen alten Beschr\'e4nkungen sowie betr\'e4chtlich schneller (32bit). Mehr dazu und zum Sortieren von Dateien aus FLEX-Skripten heraus steht in einem `\cf2\ul\b eigenen Text\cf0\ulnone\b0 `.\f2 
\par \f4 Man erwartet, da\'df der Rechner in immer neuer Auswahl und Gestaltung geordnete Dateien und Listen hervorbringen kann. Die Produktion einer sortierten Datei oder Liste zerf\'e4llt in drei Vorg\'e4nge, damit wirklich jede Anforderung erf\'fcllt werden kann. Alle drei Vorg\'e4nge l\'e4\'dft man normalerweise \'fcber eine Batchdatei automatisch hintereinander ablaufen (-\f7\'d8\f2  Kap.6). Beispiele sind SR-LIST.BAT, PR-LIST.BAT, QUEX.BAT und RN.BAT. Darin ist das Sortieren enthalten, und man bemerkt es nur an den Zwischenmeldungen. 
\par \i Hinweis: \i0\f4 Bei den Windows-Programmen kann man Ergebnismengen unmittelbar am Bildschirm sortieren lassen, wobei zum Sortieren jeder Punkt der Kurzanzeige benutzt werden kann: der Titel, der Verfasser, das Jahr etc. Danach kann die Ergebnismenge gleich in der gew\'e4hlten Reihenfolge exportiert und gedruckt werden. Unter DOS war das nicht m\'f6glich. \f2 
\par \f4 Es folgt die Beschreibung, was man tun mu\'df, wenn man ausnahmsweise alle drei Schritte einzeln durchf\'fchren will: \f2 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274 
\par \pard\ltrpar\fi-432\li432\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\b 1.\b0\tab Zuerst wird das Volltext-Suchprogramm SRCH (-\f7\'d8\f2  Kap.4) oder das Schnellzugriffprogramm\f4  PRESTO\f2  (-\f7\'d8\f4  Kap.1) mit Export-Option (-e...) benutzt, um aus den vorhandenen Daten eine "sortierf\'e4hige Datei" aufzubereiten. \f2 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274 
\par \pard\ltrpar\fi-432\li432\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\tab Eine Datei ist \b\f4 sortierf\'e4hig\b0\f2 , wenn jeder Datensatz 
\par \pard\ltrpar\fi-913\li913\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\tab  1.\tab mit einem Sortierbegriff beginnt und 
\par \tab  2.\tab mit den Zeichen\f4 codes 13/10 endet\f2  \f4 (\f2 "Carriage Return" und "Line Feed" \f4 genannt)\f2 . 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274 
\par \pard\ltrpar\fi-432\li432\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\tab\f4 Mit Hilfe der Parameterdateien des Typs \f5 S-*.APR\f4  k\'f6nnen die Programme solche Dateien erstellen. Als Sortierbegriff wird dann z.B. die Kombination aus den Kategorien #40 und #20 genommen und in sortierbarer Form an den Anfang jeder Aufnahme geschrieben. Sehen Sie sich dazu die Datei \f5 S-PVJ.APR\f4  an, die Kommentare darin erm\'f6glichen Ihnen, eine andere Sortierung einzustellen: ver\'e4ndern Sie dazu die n\'f6tigen Teile (haupts\'e4chlich die Kategorienummern) mittels Ihres Texteditors. \f2 
\par \tab\f4 Die Tabelle \f5 S.APT\f4 , die von den S-*.APR-Dateien automatisch nachgeladen wird, enth\'e4lt die Vorschriften f\'fcr die Zeichenumwandlung (Klein-/Gro\'dfbuchstaben, Umlautaufl\'f6sung, Sonderzeichen weglassen etc.). Auch diese Tabelle k\'f6nnen Sie ver\'e4ndern, sie ist kommentiert. \f2 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274 
\par \pard\ltrpar\fi-432\li432\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\tab\f4 Hat man jedoch, als Sonderfall, in die Kategorie #00 jedes Datensatzes ein sortierf\'e4higes Kriterium von vornherein selbst eingegeben, und will man nun dieses und kein anderes zum Sortieren benutzen, dann nimmt man die Parameterdatei I-1.APR zum Erstellen der Sortierdatei.  \f2 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274 
\par \pard\ltrpar\fi-431\li431\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\b 2.\b0\tab Vom \lang1033\b\i CockPit\b0\i0\f4 -Men\'fc "Funktionen" aus ruft man mit Ziffer 8 das Sortierprogramm auf. Man wird gefragt \f2 
\par \pard\ltrpar\fi-913\li913\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\lang1031\tab   \bullet\tab auf welchem Laufwerk die zu sortierende Datei ist; 
\par \tab\tab\f4 es kommt dann die Liste der auf dem Laufwerk stehenden Dateien, so da\'df man auf die \'fcbliche Art (durch Setzen eines '+') die gew\'fcnschte Datei markieren kann, \f2 
\par \tab   \bullet\tab\f4 wohin die sortierte Datei zu schreiben ist und wie sie hei\'dfen soll. Wenn auf dem Ziellaufwerk nicht mindestens die doppelte Gr\'f6\'dfe der Sortierdatei frei ist, sucht das Programm nach einem anderen Laufwerk mit gen\'fcgend Platz. Wenn keines zu finden ist, kommt eine entsprechende Nachricht, und ASORT tut erst einmal nichts. Schaffen Sie Platz, und zwar mindestens doppelt so viel, wie die zu sortierende Datei beansprucht. \f2 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274 
\par \pard\ltrpar\fi-432\li432\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\tab\f4 Nach diesen Vorbereitungen wird die eigentliche Sortierarbeit erledigt. Einige Zwischenmeldungen informieren Sie \'fcber den Fortgang des Prozesses. \f2 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274 
\par \pard\ltrpar\fi-432\li432\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\b 3.\b0\tab Nach getaner Arbeit erscheint wieder das \lang1033\b\i CockPit\b0\i0\f4 . Wenn die sortierte Datei nun gedruckt oder mit anderen Parametern exportiert werden soll, w\'e4hlt man Funktion 6 ("Export",\b\f8  -f 6\b0\f6 ) \f4 und dort die geeignete Parameterdatei f\'fcr die Produktion.\f6 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\lang1031\f2 
\par \f4 Eine Anmerkung zum Sortieren von Zahlen: korrekte Sortierung von Zahlenwerten erfordert, da\'df die Ziffern spaltenrichtig mit f\'fchrenden Nullen eingegeben wurden. Es wird Zeichen f\'fcr Zeichen von links nach rechts sortiert, daher k\'f6nnen Zahlen mit unterschiedlicher Stellenzahl nicht automatisch nach ihrem Zahlenwert geordnet werden. Mit einem Manipulationsbefehl wie z.B.\lang1033\f6   r7,0  \f4 kann man jedoch beim Exportieren erreichen, da\'df Zahlen f\'fcr einen Sortierkopf korrekt aufbereitet werden (--> 10.2.6.3). Ziffern ordnen ansonsten vor Buchstaben.\f6  
\par \lang1031\f2\tab In Kap. 10.4.2 ist der Prototyp einer Parameterdatei abgedruckt, die \lang1033\b\i allegro\b0\i0\f4 -Daten zum Sortieren vorbereitet. Sie k\'f6nnen diese Datei, S-0.APR, als Muster f\'fcr eigene Sortierproduktionen nehmen. 
\par Nach dem Sortieren einer .ALG-Datei folgt in den meisten F\'e4llen ein weiterer Durchlauf des Programms SRCH, um die ALG-Datei in eine andere Form zu bringen, etwa eine Textdatei.\f2 
\par \lang1031 
\par \b Aufruf des Programms in Stapeldateien\b0 
\par \f4 Das Programm ASORT l\'e4\'dft sich, wie die anderen Programme, in einer Stapeldatei einsetzen. D.h. man kann es so aufrufen, da\'df es automatisch abl\'e4uft ohne noch eine Frage zu stellen. Dies ist wichtig, wenn man das Programm in gr\'f6\'dfere Abl\'e4ufe einbauen will. In den schon genannten Batchdateien (SR-LIST.BAT usw.) kann man sich anschauen, wie so etwas gemacht wird. \f2 
\par \f4 Der einfachste Fall (der Normalfall) sieht so aus, da\'df eine Datei namens \i\f2 xyz\i0  vorliegt und durch Sortierung daraus eine Datei namens \i abc\i0\f4  entstehen soll. Dann gen\'fcgt der Befehl \f2 
\par \lang1033\b\f6 asort \b0\i xyz abc\i0 
\par \lang1031\f4 wobei die Namen wie \'fcblich mit Pfadangabe zu geben sind, wenn die Dateien nicht auf dem aktuellen Pfad liegen. Ein Beispiel: \f2 
\par \lang1033\b\f6 asort uuu.alg sss.alg\b0 
\par \lang1031\f2 Damit ASORT flexibel einsetzbar wird, gibt es noch ein paar Feinheiten. Es kann beim Aufruf die folgenden Optionen auswerten: 
\par \pard\ltrpar\fi-432\li432\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274  \bullet\tab zwei Dateinamen: Eingabe- und Ausgabedatei, in genau dieser Reihenfolge. 
\par \tab Man kann die Namen ohne '\lang1033\f6 -' angeben, jedoch sind auch\b  -i\b0  \i eingabedatei\i0  und\b  -o\b0  \i ausgabedatei\i0\f5  m\'f6glich ('i' f\'fcr Input, 'o' f\'fcr Output). \f6 
\par \lang1031\f2  \bullet\lang1033\b\f6\tab -d \b0\i muster\i0  : alle mit dem \i muster\i0\f5  \'fcbereinstimmenden Dateinamen werden zum Sortieren angeboten, man w\'e4hlt auf die \'fcbliche Art (Markieren mit einem '+') die zu sortierende Datei aus. \f6 
\par \lang1031\f2  \bullet\tab\f4 eine Positionsangabe f\'fcr den Beginn des Sortierbegriffs. Diese wird mit \f2 
\par \lang1033\b\f6\tab -c pos\b0        \f5\fs16 ( 'c'  steht f\'fcr "column", default: -c0 )\f6\fs20 
\par \lang1031\f2\tab\f4 angegeben (die Z\'e4hlung beginnt mit 0 f\'fcr das erste Zeichen). Ohne\lang1033\f6  -c \f2 beginnt der Vergleich beim ersten Zeichen. Meistens ist das in Ordnung, auch wenn zuerst eine immer gleiche Kategorienummer kommt, denn die wirkt sich auf die Sortierung dann ohnehin nicht aus.\b  -c\b0\f4  mu\'df also nur angegeben werden, wenn vor dem Sortierbegriff eine feste Anzahl von Zeichen steht, die unterschiedliche Werte haben k\'f6nnen. Die L\'e4nge des Sortierbegriffs ist nicht begrenzt (kann auch l\'e4nger als 256 Zeichen sein).\f6 
\par \lang1031\f2  \bullet\lang1033\b\f6\tab -u1/2\b0   :  \f2 wenn die Kategorien\f6  #u1 \f2 oder\f6  #u1 \b und\b0  #u2 \f2 nach dem Sortieren zu beseitigen sind. 
\par \tab Mit \b\f6 -u3 \b0\f2 wird auch noch der Code 1 am Satzanfang beseitigt\lang1031\f4  und \lang1033\f6 #u2\lang1031\f4  in eine reine Textzeile verwandelt\lang1033\f2 . 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\lang1031\bullet\lang1033\b\f6\tab -r\b0   \f4 schaltet die R\'fcckw\'e4rts-Sortierung ein (also absteigend von 9 nach 0 und von z nach a)\f6 
\par \pard\ltrpar\nowidctlpar\hyphpar0\qj\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\lang1031\expndtw-2\f9\bullet\lang1033\b\f5\tab -x1\b0\f9   schaltet den .adt-Modus ein
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\lang1031\expndtw0\f2 
\par \pard\ltrpar\fi-658\li658\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\b Allgemeine Form\b0 : 
\par \pard\ltrpar\fi-658\li658 
\par    \f6 asort [\i laufw\i0 :][\i pfad\i0\\]\i eingabedatei\i0  [\i laufw\i0 :][\i pfad\i0\\]\i ausgabedatei\i0  [-c \i pos\i0 ] [-u1,2,3] [-r]\f2 
\par \pard\ltrpar\fi-658\li658\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274 
\par Ein solcher Befehl kann auch direkt mit der Hand eingegeben werden, um eine Datei ad hoc zu sortieren. 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274\expndtw-2\f9 Die Option  \f5 -x1\f9   am Schlu\'df bedeutet, da\'df Ein- und Ausgabedateien vom Typ .adt sind (im sog. Externformat, s. Kap.2).
\par \expndtw0\f2 
\par \b\f4 Anmerkung f\'fcr DOS- und UNIX-Kenner\b0\f2 
\par \pard\ltrpar\tx1140\tx1860\tx2580\tx3300\tx4020\tx4740\tx5460\tx6180\tx6900\tx7620\tx8340\tx9060\tx9780\tx10500\f4 Mit ASORT kann man auch andere Dateien sortieren, wenn die zu ordnenden Einheiten (Datens\'e4tze) durch die Kombination 13 10 (hex. \f5 0Dh 0Ah\f4 , auch "Carriage Return / Line Feed" genannt) getrennt sind. Das ist die einzige Voraussetzung - die Datens\'e4tze k\'f6nnen ansonsten von beliebiger L\'e4nge sein. Das Programm bildet Portionen von gut 1MB Gr\'f6\'dfe und sortiert diese zun\'e4chst vor. Dann werden jeweils 4 dieser Portionen zu einer Datei zusammengemischt. Das setzt sich fort, bis schlie\'dflich nur noch eine Datei \'fcbrig ist. Das ist dann die Ergebnisdatei. ASORT pr\'fcft auch, bevor es beginnt, ob gen\'fcgend Platz auf dem aktuellen Laufwerk ist. Wenn nicht, sieht es sich die anderen Laufwerke an und nimmt bei Erfolg ein anderes f\'fcr die Zwischendateien. (ASORT wurde geschrieben, weil das SORT von MS-DOS nur Dateien bis 64K und S\'e4tze bis 255 Zeichen sortieren kann. ASORT schafft 640 MB und S\'e4tze bis 32K. Oder anders ausgedr\'fcckt: 8 Millionen S\'e4tze mit durchnittlich 80 Byte.) \f2 
\par \pard\ltrpar\tx432\tx914\tx1634\tx2354\tx3074\tx3794\tx4514\tx5234\tx5954\tx6674\tx7394\tx8114\tx8834\tx9554\tx10274 Unter UNIX gibt es bessere Sortierprogramme, z.B.\lang1033\f6  \b gsort\b0  \f4 (GNU-sort), daher wird ASORT nicht fuer UNIX gebraucht. Einzig die Option\b\f6  -u\b0  \f2 haben andere Programme nicht. Das Programm\f6  gsort.exe \f4 gibt es auch f\'fcr DOS. Es ist auf dem FTP-Server und auf der CD-ROM von V15 (Verzeichnis\f6  \\programm\\util) \f2 zu finden. Man startet es mit\f6   gsort <\i Eingabedatei \i0 >\i Ausgabedatei\i0 . 
\par gsort\lang1031\f2  kennt noch weitere Optionen, die ASORT nicht bietet:  \f6 -f\f4   zum Ignorieren des gro\'df-/klein-Unterschiedes, Sortieren nach bestimmten Feldern, oder das Eliminieren von S\'e4tzen mit gleichem Sortierfeld. \f2 
\par Unter UNIX liefert der Befehl\lang1033\f6   man sort  oder  man gsort \f2 die Dokumentation zum Programm. Probleme kann es mit dem Feldende-Code 0 geben.\f6 
\par \lang1031\f2 Mit \lang1033\b\i allegro\b0\i0\f4  k\'f6nnen nur Export-Experten solcherlei Leistungen realisieren, indem sie geeignete Sortierfelder per Export produzieren. \f2 
\par \i Tip:\i0\f4  Wenn man z.B. absteigend nach Erscheinungsjahr sortieren will, kann man auch im Sortierfeld das Jahr als komplement\'e4re Zahl codieren:\f6   #76 b3 x"*1" x"-10000" f"-" e"."  (b3, wenn ks=1 ist). \f2 Die Jahreszahl wird also von 10000 subtrahiert, dadurch kehrt sich dann die Ordnung um.\f6 
\par \pard\ltrpar\lang1031\f2 
\par ?h exprt=h exprt 
\par ?eigenen Text=h sort 
\par 
\par }
 